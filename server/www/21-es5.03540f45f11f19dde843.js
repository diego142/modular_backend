!function(){function t(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw o}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{rBND:function(e,r,a){"use strict";a.r(r),a.d(r,"TagFormPageModule",(function(){return C}));var o=a("ofXK"),s=a("3Pt+"),c=a("TEn/"),u=a("tyNb"),l=a("mrSG"),f=a("FMb1"),h=a("HIyf"),b=a("QYMr"),d=a("fXoL"),v=a("EQut"),m=a("lBcp"),y=a("UcdY"),g=a("K1j1");function p(t,e){if(1&t){var n=d.Lb();d.Kb(0,"ion-item"),d.Kb(1,"ion-checkbox",7),d.Sb("ngModelChange",(function(t){return d.dc(n),e.$implicit.isCheck=t}))("ionChange",(function(){return d.dc(n),d.Ub().validateForm()})),d.Jb(),d.Kb(2,"ion-label"),d.ic(3),d.Jb(),d.Jb()}if(2&t){var i=e.$implicit;d.xb(1),d.ac("ngModel",i.isCheck),d.xb(2),d.jc(i.name)}}var k,w,R,A=[{path:"",component:(k=function(){function e(t,i,r,a,o,s,c){n(this,e),this.branchService=t,this.tagService=i,this.activatedRoute=r,this.alertController=a,this.router=o,this.questionService=s,this.nlService=c,this.branchList=new Array,this.checkList=new Array,this.labels=[]}var r,a,o;return r=e,(a=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.questionId=this.activatedRoute.snapshot.params.id,this.labels=this.activatedRoute.snapshot.queryParams.labels?this.activatedRoute.snapshot.queryParams.labels:[],this.getBranches(),this.formValid=!1,this.addWords=!1}},{key:"navigateAlert",value:function(t,e,n,i){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var a,o=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:t,subHeader:e,buttons:[{text:n,handler:function(){o.router.navigate(["/"+i+"/"])}}]});case 2:return a=r.sent,r.next=5,a.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"getBranches",value:function(){var t=this;this.branchService.getBranches().subscribe((function(e){e.status?(t.branchList=e.data,t.fillList()):t.navigateAlert("\xa1ERROR AL OBTENER INFORMACION","Hubo un problema al intentar obtener informacion del servidor","OK","my-questions")}),(function(e){t.navigateAlert("ERROR DE SERVIDOR",e.message,"OK","my-questions")}))}},{key:"fillList",value:function(){var e,n=t(this.branchList);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=new h.a;r.id=i._id,r.name=i.name,r.isCheck=!1,this.checkList.push(r)}}catch(a){n.e(a)}finally{n.f()}this.fillCheckList()}},{key:"fillCheckList",value:function(){var e,n=this;this.addWords=!(this.labels.length>0);var i,r=t(this.labels);try{var a=function(){var t=i.value;e=n.checkList.findIndex((function(e){return e.id===t})),n.checkList[e].isCheck=!0};for(r.s();!(i=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}this.validateForm()}},{key:"createTag",value:function(){var e=this,n=new b.a;n.question._id=this.questionId;var i,r=t(this.checkList);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.isCheck){var o=new f.a;o._id=a.id,n.tags.push(o)}}}catch(s){r.e(s)}finally{r.f()}this.addWords&&this.addNewWords(this.checkList),this.tagService.createTag(n).subscribe((function(t){t.status?e.navigateAlert("\xa1PREGUNTA ENVIADA!","Creaste una nueva pregunta","OK","my-questions"):e.navigateAlert("\xa1ERROR AL AGREGAR LOS TAGS!","Hubo un problema al intentar crear este tag","OK","my-questions")}),(function(t){e.navigateAlert("ERROR DE SERVIDOR",t.message,"OK","my-questions")}))}},{key:"addNewWords",value:function(e){var n,i=this,r=new Array,a=t(this.checkList);try{var o=function(){var t=n.value,e=i.labels.findIndex((function(e){return e===t.id}));t.isCheck&&-1===e&&r.push(t.name)};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}this.questionService.getQuestionById(this.questionId).subscribe((function(t){t.status&&i.nlService.addNewWords(t.data.title,r).subscribe((function(t){}),(function(t){console.log(t)}))}),(function(t){console.log(t)}))}},{key:"validateForm",value:function(){var e,n=this,i=t(this.checkList);try{var r=function(){var t=e.value,i=n.labels.findIndex((function(e){return e===t.id}));if(t.isCheck&&-1===i)return n.addWords=!0,"break";n.addWords=!1};for(i.s();!(e=i.n()).done&&"break"!==r(););}catch(s){i.e(s)}finally{i.f()}var a,o=t(this.checkList);try{for(o.s();!(a=o.n()).done;)if(a.value.isCheck)return void(this.formValid=!0)}catch(s){o.e(s)}finally{o.f()}this.formValid=!1,this.addWords=!1}}])&&i(r.prototype,a),o&&i(r,o),e}(),k.\u0275fac=function(t){return new(t||k)(d.Hb(v.a),d.Hb(m.a),d.Hb(u.a),d.Hb(c.b),d.Hb(u.f),d.Hb(y.a),d.Hb(g.a))},k.\u0275cmp=d.Bb({type:k,selectors:[["app-tag-form"]],decls:15,vars:2,consts:[["slot","start"],["menu","main-menu"],["lines","full"],["color","medium"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],["expand","full","color","myPrimary",3,"disabled","click"],["slot","start","color","success",3,"ngModel","ngModelChange","ionChange"]],template:function(t,e){1&t&&(d.Kb(0,"ion-header"),d.Kb(1,"ion-toolbar"),d.Kb(2,"ion-title"),d.ic(3,"Agregar etiquetas "),d.Jb(),d.Kb(4,"ion-buttons",0),d.Ib(5,"ion-menu-button",1),d.Jb(),d.Jb(),d.Jb(),d.Kb(6,"ion-content"),d.Kb(7,"ion-item",2),d.Kb(8,"ion-text",3),d.Kb(9,"div",4),d.ic(10," Por favor marca la(s) categoria(s) a la que pertenece tu pregunta. "),d.Jb(),d.Jb(),d.Jb(),d.Kb(11,"ion-list"),d.gc(12,p,4,2,"ion-item",5),d.Jb(),d.Kb(13,"ion-button",6),d.Sb("click",(function(){return e.createTag()})),d.ic(14,"Enviar"),d.Jb(),d.Jb()),2&t&&(d.xb(12),d.ac("ngForOf",e.checkList),d.xb(1),d.ac("disabled",!e.formValid))},directives:[c.w,c.R,c.Q,c.i,c.D,c.q,c.z,c.N,c.B,o.i,c.h,c.n,c.c,s.e,s.h,c.A],styles:["ion-content[_ngcontent-%COMP%]{--background:#fff}ion-title[_ngcontent-%COMP%]{--color:#fff;font-family:Arial,Helvetica,sans-serif}ion-toolbar[_ngcontent-%COMP%]{--background:#00796b;--color:#fff}ion-item[_ngcontent-%COMP%]{--background:#f5f5f5;--color:#000}"]}),k)}],O=((R=function t(){n(this,t)}).\u0275mod=d.Fb({type:R}),R.\u0275inj=d.Eb({factory:function(t){return new(t||R)},imports:[[u.i.forChild(A)],u.i]}),R),C=((w=function t(){n(this,t)}).\u0275mod=d.Fb({type:w}),w.\u0275inj=d.Eb({factory:function(t){return new(t||w)},imports:[[o.b,s.a,c.S,O]]}),w)}}])}();
{"version":3,"sources":["webpack:///src/app/pages/user/users/users.page.html","webpack:///src/app/pages/user/users/users-routing.module.ts","webpack:///src/app/pages/user/users/users.module.ts","webpack:///src/app/pages/user/users/users.page.scss","webpack:///src/app/pages/user/users/users.page.ts"],"names":["routes","path","component","UsersPageRoutingModule","imports","forChild","exports","UsersPageModule","declarations","UsersPage","userService","actionSheetController","alertController","usersList","Array","getUsers","pmsn","id","create","cssClass","header","message","buttons","text","role","handler","changePermission","alert","present","deleteUser","mode","icon","confirmPermission","actionSheet","subscribe","res","data","err","console","log","updatePermission","status","ind","findIndex","user","_id","permission","splice","selector","template"],"mappings":"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","file":"pages-user-users-users-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"headerColor\\\">\\n    <ion-title>Usuarios (Admin)\\n\\n    </ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button menu=\\\"main-menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-back-button defaultHref=\\\"events\\\"></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ios\\\">\\n\\n  <ion-list>\\n\\n    <ion-item *ngFor=\\\"let user of usersList\\\">\\n\\n      <ion-thumbnail  slot=\\\"end\\\" class=\\\"ion-text-wrap ion-text-right\\\">\\n        <ion-button color=\\\"danger\\\" (click)=\\\"confirmDelete(user._id)\\\">  <ion-icon name=\\\"trash\\\"></ion-icon> </ion-button>\\n        <ion-button color=\\\"secondary\\\" (click)=\\\"presentActionSheet(user._id)\\\">  <ion-icon name=\\\"lock-open\\\"></ion-icon> </ion-button>\\n      </ion-thumbnail >\\n      <ion-label class=\\\"ion-text-wrap\\\">\\n        <strong>{{ user.name + ' ' + user.lastName}}</strong>\\n        <ion-text color=\\\"primary\\\" style=\\\"display: block;\\\"> <strong style=\\\"color: rgb(124, 124, 124)\\\">Rol: </strong> {{ (user.permission == 0) ? 'Usuario' :'Admin' }}</ion-text>\\n        <ion-text color=\\\"primary\\\" style=\\\"display: block;\\\"> <strong style=\\\"color: rgb(124, 124, 124)\\\">Código: </strong> {{ user.code }}</ion-text>\\n        <ion-text color=\\\"primary\\\" style=\\\"display: block;\\\"> <strong style=\\\"color: rgb(124, 124, 124)\\\">Email: </strong> {{ user.email }}</ion-text>\\n      </ion-label>\\n    </ion-item>\\n\\n  </ion-list>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UsersPage } from './users.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UsersPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UsersPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UsersPageRoutingModule } from './users-routing.module';\n\nimport { UsersPage } from './users.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UsersPageRoutingModule\n  ],\n  declarations: [UsersPage]\n})\nexport class UsersPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3VzZXIvdXNlcnMvdXNlcnMucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ActionSheetController, AlertController } from '@ionic/angular';\nimport { User } from 'src/app/models/user';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'app-users',\n  templateUrl: './users.page.html',\n  styleUrls: ['./users.page.scss'],\n})\nexport class UsersPage implements OnInit {\n\n  usersList = new Array<User>();\n  constructor(private userService: UserService, public actionSheetController: ActionSheetController,\n    private alertController: AlertController) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.getUsers();\n  }\n\n  async confirmPermission(pmsn: number, id: string) {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: '¡CONFIRMAR!',\n      message: '¿Estas seguro que deseas conceder el permiso de ' + ((pmsn === 0) ? ' solo USUARIO' : 'ADMINISTRADOR') + '?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n        }, {\n          text: 'Si',\n          cssClass: 'success',\n          handler: () => {\n            this.changePermission(pmsn, id);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async confirmDelete(id: string) {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: '¡CONFIRMAR!',\n      message: '¿Estas seguro que deseas eliminar este usuario?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n        }, {\n          text: 'Si',\n          role: 'danger',\n\n          handler: () => {\n            this.deleteUser(id);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async presentActionSheet(id: string) {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Permisos',\n      mode: 'ios',\n      buttons: [{\n        text: 'Administrador',\n        icon: '',\n        handler: () => {\n          this.confirmPermission(1, id);\n        }\n      }, {\n        text: 'Usuario',\n        icon: '',\n        handler: () => {\n          this.confirmPermission(0, id);\n        }\n      }]\n    });\n    await actionSheet.present();\n  }\n\n  getUsers() {\n    this.userService.getUsers().subscribe((res) => {\n      this.usersList = res.data;\n    }, (err) => {\n      console.log(err);\n    });\n  }\n\n  changePermission(pmsn: number, id: string) {\n    this.userService.updatePermission(pmsn, id).subscribe((res) => {\n      if (res.status) {\n        const ind = this.usersList.findIndex(user => user._id === res.data._id);\n        this.usersList[ind].permission = pmsn;\n      }\n\n    }, (err) => {\n      console.log(err);\n    });\n  }\n\n  deleteUser(id: string) {\n    this.userService.deleteUser(id).subscribe((res) => {\n      if (res.status) {\n        const ind = this.usersList.findIndex(user => user._id === res.data._id);\n        this.usersList.splice(ind, 1);\n      }\n    }, (err) => {\n\n    });\n  }\n\n}\n"]}
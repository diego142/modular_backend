(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"8EBI":function(t,e,i){"use strict";i.r(e),i.d(e,"QuestionFormPageModule",(function(){return v}));var n=i("ofXK"),s=i("3Pt+"),o=i("TEn/"),a=i("tyNb"),r=i("mrSG"),c=i("P+PR"),u=i("2hxB"),l=i("J31/"),b=i("fXoL"),d=i("UcdY"),g=i("K1j1");function f(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-button",12),b.Sb("click",(function(){return b.dc(t),b.Ub().createQuestion()})),b.ic(1," PREGUNTAR "),b.Jb()}if(2&t){b.Ub();const t=b.cc(10);b.ac("disabled",!t.valid)}}function h(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-button",12),b.Sb("click",(function(){return b.dc(t),b.Ub().updateQuestion()})),b.ic(1," ACTUALIZAR "),b.Jb()}if(2&t){b.Ub();const t=b.cc(10);b.ac("disabled",!t.valid)}}function m(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-item"),b.Kb(1,"ion-button",16),b.Sb("click",(function(){b.dc(t);const i=e.$implicit;return b.Ub(2).getQuestions(i.ref)})),b.ic(2),b.Jb(),b.Kb(3,"ion-text",17),b.ic(4,"Mostrar sugerencias."),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(2),b.jc(t.name)}}function p(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-item",18),b.Sb("click",(function(){b.dc(t);const i=e.$implicit;return b.Ub(2).viewQuestion(i._id)})),b.Kb(1,"ion-text",19),b.ic(2),b.Vb(3,"date"),b.Jb(),b.Kb(4,"ion-label"),b.Kb(5,"h2"),b.Kb(6,"strong"),b.ic(7),b.Jb(),b.Jb(),b.Kb(8,"ion-text",20),b.Kb(9,"span"),b.ic(10),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(2),b.kc(" ",b.Wb(3,3,t.date,"d/M/yyyy")," "),b.xb(5),b.kc(" ",t.title," "),b.xb(3),b.kc(" ",t.body," ")}}function y(t,e){if(1&t&&(b.Kb(0,"div"),b.Kb(1,"ion-list"),b.Kb(2,"ion-text",13),b.ic(3,"Tu pregunta es de tipo:"),b.Jb(),b.gc(4,m,5,1,"ion-item",14),b.Jb(),b.Kb(5,"ion-list"),b.gc(6,p,11,6,"ion-item",15),b.Jb(),b.Jb()),2&t){const t=b.Ub();b.xb(4),b.ac("ngForOf",t.labels),b.xb(2),b.ac("ngForOf",t.questionList)}}const K=[{path:"",component:(()=>{class t{constructor(t,e,i,n,s){this.activatedRoute=t,this.questionService=e,this.router=i,this.alertController=n,this.nlService=s,this.question=new c.a,this.user=new u.a,this.today=(new Date).toISOString()}ngOnInit(){this.characters=[" ",".","?"]}ionViewWillEnter(){this.question=new c.a,this.questionId=this.activatedRoute.snapshot.params.id,this.user=l.a.getStorageUser(),this.getQuestion(this.questionId),this.show=!1,this.questionList=Array(),this.labels=new Array}navigateAlert(t,e,i,n){return Object(r.a)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({header:t,subHeader:e,buttons:[{text:i,handler:()=>{this.router.navigate(["/"+n+"/"])}}]});yield s.present()}))}createQuestion(){this.question.user._id=this.user._id,this.question.date=new Date,this.question.open=!0,this.questionService.createQuestion(this.question).subscribe(t=>{t.status?this.router.navigate(["/tag-form/"+t.data._id],{queryParams:{labels:this.labels.map(t=>t.ref)}}):this.navigateAlert("\xa1ERROR AL CREAR!","Hubo un problema al intentar crear esta pregunta","OK","my-questions")},t=>{this.navigateAlert("ERROR DE SERVIDOR",t.message,"OK","my-questions")})}updateQuestion(){this.questionService.updateQuestion(this.question).subscribe(t=>{t.status?this.navigateAlert("\xa1PREGUNTA ACTUALIZADA!","Actualizaste esta pregunta","OK","my-questions"):this.navigateAlert("\xa1ERROR AL ACTULIZAR!","Hubo un problema al intentar actualizar estra pregunta","OK","my-questions")},t=>{this.navigateAlert("ERROR DE SERVIDOR",t.message,"OK","events")})}getQuestion(t){"0"!==t?this.questionService.getQuestionById(t).subscribe(t=>{t.status?this.question=t.data:this.navigateAlert("\xa1ERROR AL OBTENER!","Hubo un problema al intentar obtener la informacion de esta pregunta","OK","my-questions")},t=>{this.navigateAlert("ERROR DE SERVIDOR",t.message,"OK","my-questions")}):this.question=new c.a}getClassifications(t){(this.question.title?this.question.title.length:0)<10?(this.labels=[],this.show=!1,this.questionList=new Array):this.characters.find(e=>t===e)&&this.nlService.getClassify(this.question).subscribe(t=>{t.data.length&&(this.labels=t.data,this.show=!0)},t=>{console.log(t)})}getQuestions(t){this.nlService.getQuestions(t).subscribe(t=>{if(t.status){this.questionList=new Array;for(let e of t.data)this.questionList.push(e.question)}},t=>{console.log(t)})}viewQuestion(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"\xbfSalir de la edici\xf3n?",message:"Si continuas se perdera el progreso de tu pregunta.",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Continuar",cssClass:"success",handler:()=>{this.router.navigate(["/question-view/"+t])}}]});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(a.a),b.Hb(d.a),b.Hb(a.f),b.Hb(o.b),b.Hb(g.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-question-form"]],decls:29,vars:6,consts:[["slot","start"],["menu","main-menu"],["slot","end"],["defaultHref","events"],["formQuestion","ngForm"],["displayFormat","MMMM DD, YYYY","display-timezone","utc","readonly","",3,"value"],["position","floating","color","medium"],["type","text","name","title","minlength","10","required","",3,"ngModel","ngModelChange","keyup"],["name","body","minlength","8","required","",3,"ngModel","ngModelChange","ionFocus"],["expand","full","color","myPrimary",3,"disabled","click",4,"ngIf","ngIfElse"],["elseBtn",""],[4,"ngIf"],["expand","full","color","myPrimary",3,"disabled","click"],[1,"ion-margin-start"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["expand","full","color","myPrimary",3,"click"],["color","medium","slot","end"],[3,"click"],["slot","end","color","myPrimaryDark"],["color","myPrimaryTextColor"]],template:function(t,e){if(1&t&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar"),b.Kb(2,"ion-title"),b.ic(3,"Nueva pregunta "),b.Jb(),b.Kb(4,"ion-buttons",0),b.Ib(5,"ion-menu-button",1),b.Jb(),b.Kb(6,"ion-buttons",2),b.Ib(7,"ion-back-button",3),b.Jb(),b.Jb(),b.Jb(),b.Kb(8,"ion-content"),b.Kb(9,"form",null,4),b.Kb(11,"ion-list"),b.Kb(12,"ion-item"),b.Kb(13,"ion-label"),b.ic(14,"Fecha:"),b.Jb(),b.Ib(15,"ion-datetime",5),b.Jb(),b.Kb(16,"ion-item"),b.Kb(17,"ion-label",6),b.ic(18,"Tu pregunta:"),b.Jb(),b.Kb(19,"ion-input",7),b.Sb("ngModelChange",(function(t){return e.question.title=t}))("keyup",(function(t){return e.getClassifications(t.key)})),b.Jb(),b.Jb(),b.Kb(20,"ion-item"),b.Kb(21,"ion-label",6),b.ic(22,"Agrega mas detalles sobre la pregunta:"),b.Jb(),b.Kb(23,"ion-textarea",8),b.Sb("ngModelChange",(function(t){return e.question.body=t}))("ionFocus",(function(){return e.getClassifications("?")})),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(24,"section"),b.gc(25,f,2,1,"ion-button",9),b.gc(26,h,2,1,"ng-template",null,10,b.hc),b.Jb(),b.gc(28,y,7,2,"div",11),b.Jb()),2&t){const t=b.cc(27);b.xb(15),b.ac("value",e.today),b.xb(4),b.ac("ngModel",e.question.title),b.xb(4),b.ac("ngModel",e.question.body),b.xb(2),b.ac("ngIf","0"==e.questionId)("ngIfElse",t),b.xb(3),b.ac("ngIf",e.show)}},directives:[o.w,o.R,o.Q,o.i,o.D,o.f,o.g,o.q,s.k,s.f,s.g,o.B,o.z,o.A,o.r,o.X,o.y,o.Y,s.b,s.j,s.e,s.h,o.O,n.j,o.h,o.N,n.i],pipes:[n.d],styles:["ion-content[_ngcontent-%COMP%]{--background:#fff}ion-title[_ngcontent-%COMP%]{--color:#fff;font-family:Arial,Helvetica,sans-serif}ion-toolbar[_ngcontent-%COMP%]{--background:#00796b;--color:#fff}ion-button[_ngcontent-%COMP%]{--color:#fff;font-family:Arial,Helvetica,sans-serif}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(K)],a.i]}),t})(),v=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[n.b,s.a,o.S,q]]}),t})()}}]);
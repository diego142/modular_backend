!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{M0TU:function(t,r,i){"use strict";i.r(r),i.d(r,"BranchesPageModule",(function(){return w}));var o=i("ofXK"),c=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),u=i("mrSG"),b=i("2hxB"),l=i("J31/"),f=i("fXoL"),h=i("EQut");function d(e,n){if(1&e){var t=f.Lb();f.Kb(0,"ion-card"),f.Kb(1,"ion-card-header",10),f.Kb(2,"ion-card-title"),f.Kb(3,"ion-text",11),f.Kb(4,"strong"),f.ic(5),f.Jb(),f.Jb(),f.Jb(),f.Jb(),f.Kb(6,"ion-card-content",12),f.ic(7),f.Jb(),f.Kb(8,"ion-footer"),f.Kb(9,"ion-row"),f.Kb(10,"ion-col",13),f.Kb(11,"ion-button",14),f.Sb("click",(function(){f.dc(t);var e=n.$implicit;return f.Ub().editBranch(e._id)})),f.ic(12," EDITAR "),f.Ib(13,"ion-icon",15),f.Jb(),f.Jb(),f.Kb(14,"ion-col",13),f.Kb(15,"ion-button",16),f.Sb("click",(function(){f.dc(t);var e=n.$implicit;return f.Ub().confirmClose(e._id)})),f.ic(16," ELIMINAR "),f.Ib(17,"ion-icon",17),f.Jb(),f.Jb(),f.Jb(),f.Jb(),f.Jb()}if(2&e){var r=n.$implicit;f.xb(5),f.kc(" ",r.name," "),f.xb(2),f.kc(" ",r.description," ")}}var m,p,g,v=[{path:"",component:(m=function(){function t(n,r,i,o){e(this,t),this.branchService=n,this.alertController=r,this.router=i,this.loadingController=o,this.user=new b.a,this.branchList=new Array}var r,i,o;return r=t,(i=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.user=l.a.getStorageUser(),this.getBranches()}},{key:"getBranches",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Porfavor espere..."});case 2:return n=e.sent,e.next=5,n.present();case 5:this.branchService.getBranches().subscribe((function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.status&&(this.branchList=e.data),t.next=3,n.dismiss();case 3:case"end":return t.stop()}}),t,this)})))}),(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,n.dismiss();case 3:case"end":return t.stop()}}),t)})))}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getReloadBranches",value:function(e){var n=this;this.branchService.getBranches().subscribe((function(t){t.status&&(n.branchList=t.data,e.target.complete())}),(function(n){console.log(n),e.target.complete()}))}},{key:"deleteBranch",value:function(e){var n=this;this.branchService.deleteBranch(e).subscribe((function(e){if(e.status){var t=n.branchList.findIndex((function(n){return n._id===e.data._id}));n.branchList.splice(t,1)}}),(function(e){console.log(e)}))}},{key:"editBranch",value:function(e){this.router.navigate(["/branch-form/"+e])}},{key:"confirmClose",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"\xa1CONFIRMAR!",message:"\xbfEsta seguro que desea eliminar esta rama, ya no se podra recuperar.",buttons:[{text:"No",role:"cancel",cssClass:"secondary"},{text:"Si",cssClass:"success",handler:function(){r.deleteBranch(e)}}]});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}}])&&n(r.prototype,i),o&&n(r,o),t}(),m.\u0275fac=function(e){return new(e||m)(f.Hb(h.a),f.Hb(a.b),f.Hb(s.f),f.Hb(a.U))},m.\u0275cmp=f.Bb({type:m,selectors:[["app-branches"]],decls:15,vars:1,consts:[["color","headerColor"],["slot","start"],["menu","main-menu"],["slot","end"],["defaultHref","events"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["size","small","color","success","routerLink","/branch-form/0"],["name","add"],["color","headerColor",2,"margin-bottom","10px","padding","10px"],[2,"font-size","16px"],["color","light",2,"font-size","16px"],[1,"ion-text-center"],["color","myPrimary",3,"click"],["name","create",2,"padding-left","4px"],["color","danger",3,"click"],["name","close-circle",2,"padding-left","2px"]],template:function(e,n){1&e&&(f.Kb(0,"ion-header"),f.Kb(1,"ion-toolbar",0),f.Kb(2,"ion-title"),f.ic(3,"Ramas (Admin) "),f.Jb(),f.Kb(4,"ion-buttons",1),f.Ib(5,"ion-menu-button",2),f.Jb(),f.Kb(6,"ion-buttons",3),f.Ib(7,"ion-back-button",4),f.Jb(),f.Jb(),f.Jb(),f.Kb(8,"ion-content"),f.Kb(9,"ion-refresher",5),f.Sb("ionRefresh",(function(e){return n.getReloadBranches(e)})),f.Ib(10,"ion-refresher-content"),f.Jb(),f.gc(11,d,18,2,"ion-card",6),f.Kb(12,"ion-fab",7),f.Kb(13,"ion-fab-button",8),f.Ib(14,"ion-icon",9),f.Jb(),f.Jb(),f.Jb()),2&e&&(f.xb(11),f.ac("ngForOf",n.branchList))},directives:[a.w,a.R,a.Q,a.i,a.D,a.f,a.g,a.q,a.F,a.G,o.i,a.s,a.t,a.W,s.g,a.x,a.j,a.l,a.m,a.N,a.k,a.u,a.I,a.p,a.h],styles:[""]}),m)}],x=((g=function n(){e(this,n)}).\u0275mod=f.Fb({type:g}),g.\u0275inj=f.Eb({factory:function(e){return new(e||g)},imports:[[s.i.forChild(v)],s.i]}),g),w=((p=function n(){e(this,n)}).\u0275mod=f.Fb({type:p}),p.\u0275inj=f.Eb({factory:function(e){return new(e||p)},imports:[[o.b,c.a,a.S,x]]}),p)}}])}();
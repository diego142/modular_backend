(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{AbRp:function(e,s,t){"use strict";t.r(s),t.d(s,"UsersPageModule",(function(){return m}));var i=t("ofXK"),n=t("3Pt+"),o=t("TEn/"),r=t("tyNb"),c=t("mrSG"),a=t("fXoL"),b=t("qfBg");function l(e,s){if(1&e){const e=a.Lb();a.Kb(0,"ion-item"),a.Kb(1,"ion-thumbnail",7),a.Kb(2,"ion-button",8),a.Sb("click",(function(){a.dc(e);const t=s.$implicit;return a.Ub().confirmDelete(t._id)})),a.Ib(3,"ion-icon",9),a.Jb(),a.Kb(4,"ion-button",10),a.Sb("click",(function(){a.dc(e);const t=s.$implicit;return a.Ub().presentActionSheet(t._id)})),a.Ib(5,"ion-icon",11),a.Jb(),a.Jb(),a.Kb(6,"ion-label",12),a.Kb(7,"strong"),a.ic(8),a.Jb(),a.Kb(9,"ion-text",13),a.Kb(10,"strong",14),a.ic(11,"Rol: "),a.Jb(),a.ic(12),a.Jb(),a.Kb(13,"ion-text",13),a.Kb(14,"strong",14),a.ic(15,"C\xf3digo: "),a.Jb(),a.ic(16),a.Jb(),a.Kb(17,"ion-text",13),a.Kb(18,"strong",14),a.ic(19,"Email: "),a.Jb(),a.ic(20),a.Jb(),a.Jb(),a.Jb()}if(2&e){const e=s.$implicit;a.xb(8),a.jc(e.name+" "+e.lastName),a.xb(4),a.kc(" ",0==e.permission?"Usuario":"Admin",""),a.xb(4),a.kc(" ",e.code,""),a.xb(4),a.kc(" ",e.email,"")}}const u=[{path:"",component:(()=>{class e{constructor(e,s,t){this.userService=e,this.actionSheetController=s,this.alertController=t,this.usersList=new Array}ngOnInit(){}ionViewWillEnter(){this.getUsers()}confirmPermission(e,s){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1CONFIRMAR!",message:"\xbfEstas seguro que deseas conceder el permiso de "+(0===e?" solo USUARIO":"ADMINISTRADOR")+"?",buttons:[{text:"No",role:"cancel",cssClass:"secondary"},{text:"Si",cssClass:"success",handler:()=>{this.changePermission(e,s)}}]});yield t.present()}))}confirmDelete(e){return Object(c.a)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({cssClass:"my-custom-class",header:"\xa1CONFIRMAR!",message:"\xbfEstas seguro que deseas eliminar este usuario?",buttons:[{text:"No",role:"cancel",cssClass:"secondary"},{text:"Si",role:"danger",handler:()=>{this.deleteUser(e)}}]});yield s.present()}))}presentActionSheet(e){return Object(c.a)(this,void 0,void 0,(function*(){const s=yield this.actionSheetController.create({header:"Permisos",mode:"ios",buttons:[{text:"Administrador",icon:"",handler:()=>{this.confirmPermission(1,e)}},{text:"Usuario",icon:"",handler:()=>{this.confirmPermission(0,e)}}]});yield s.present()}))}getUsers(){this.userService.getUsers().subscribe(e=>{this.usersList=e.data},e=>{console.log(e)})}changePermission(e,s){this.userService.updatePermission(e,s).subscribe(s=>{if(s.status){const t=this.usersList.findIndex(e=>e._id===s.data._id);this.usersList[t].permission=e}},e=>{console.log(e)})}deleteUser(e){this.userService.deleteUser(e).subscribe(e=>{if(e.status){const s=this.usersList.findIndex(s=>s._id===e.data._id);this.usersList.splice(s,1)}},e=>{})}}return e.\u0275fac=function(s){return new(s||e)(a.Hb(b.a),a.Hb(o.a),a.Hb(o.b))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-users"]],decls:11,vars:1,consts:[["color","headerColor"],["slot","start"],["menu","main-menu"],["slot","end"],["defaultHref","events"],[1,"ios"],[4,"ngFor","ngForOf"],["slot","end",1,"ion-text-wrap","ion-text-right"],["color","danger",3,"click"],["name","trash"],["color","secondary",3,"click"],["name","lock-open"],[1,"ion-text-wrap"],["color","primary",2,"display","block"],[2,"color","rgb(124, 124, 124)"]],template:function(e,s){1&e&&(a.Kb(0,"ion-header"),a.Kb(1,"ion-toolbar",0),a.Kb(2,"ion-title"),a.ic(3,"Usuarios (Admin) "),a.Jb(),a.Kb(4,"ion-buttons",1),a.Ib(5,"ion-menu-button",2),a.Jb(),a.Kb(6,"ion-buttons",3),a.Ib(7,"ion-back-button",4),a.Jb(),a.Jb(),a.Jb(),a.Kb(8,"ion-content",5),a.Kb(9,"ion-list"),a.gc(10,l,21,4,"ion-item",6),a.Jb(),a.Jb()),2&e&&(a.xb(10),a.ac("ngForOf",s.usersList))},directives:[o.w,o.R,o.Q,o.i,o.D,o.f,o.g,o.q,o.B,i.i,o.z,o.P,o.h,o.x,o.A,o.N],styles:[""]}),e})()}];let d=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(s){return new(s||e)},imports:[[r.j.forChild(u)],r.j]}),e})(),m=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(s){return new(s||e)},imports:[[i.b,n.a,o.S,d]]}),e})()}}]);
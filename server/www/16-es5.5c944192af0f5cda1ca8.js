!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(u)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"8EBI":function(t,r,o){"use strict";o.r(r),o.d(r,"QuestionFormPageModule",(function(){return J}));var a=o("ofXK"),s=o("3Pt+"),u=o("TEn/"),c=o("tyNb"),l=o("mrSG"),b=o("P+PR"),f=o("2hxB"),d=o("J31/"),g=o("fXoL"),m=o("UcdY"),h=o("K1j1");function v(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-button",12),g.Sb("click",(function(){return g.dc(n),g.Ub().createQuestion()})),g.ic(1," PREGUNTAR "),g.Jb()}if(2&e){g.Ub();var i=g.cc(10);g.ac("disabled",!i.valid)}}function p(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-button",12),g.Sb("click",(function(){return g.dc(n),g.Ub().updateQuestion()})),g.ic(1," ACTUALIZAR "),g.Jb()}if(2&e){g.Ub();var i=g.cc(10);g.ac("disabled",!i.valid)}}function y(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-item"),g.Kb(1,"ion-button",16),g.Sb("click",(function(){g.dc(n);var e=t.$implicit;return g.Ub(2).getQuestions(e.ref)})),g.ic(2),g.Jb(),g.Kb(3,"ion-text",17),g.ic(4,"Mostrar sugerencias."),g.Jb(),g.Jb()}if(2&e){var i=t.$implicit;g.xb(2),g.jc(i.name)}}function R(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-item",18),g.Sb("click",(function(){g.dc(n);var e=t.$implicit;return g.Ub(2).viewQuestion(e._id)})),g.Kb(1,"ion-text",19),g.ic(2),g.Vb(3,"date"),g.Jb(),g.Kb(4,"ion-label"),g.Kb(5,"h2"),g.Kb(6,"strong"),g.ic(7),g.Jb(),g.Jb(),g.Kb(8,"ion-text",20),g.Kb(9,"span"),g.ic(10),g.Jb(),g.Jb(),g.Jb(),g.Jb()}if(2&e){var i=t.$implicit;g.xb(2),g.kc(" ",g.Wb(3,3,i.date,"d/M/yyyy")," "),g.xb(5),g.kc(" ",i.title," "),g.xb(3),g.kc(" ",i.body," ")}}function w(e,t){if(1&e&&(g.Kb(0,"div"),g.Kb(1,"ion-list"),g.Kb(2,"ion-text",13),g.ic(3,"Tu pregunta es de tipo:"),g.Jb(),g.gc(4,y,5,1,"ion-item",14),g.Jb(),g.Kb(5,"ion-list"),g.gc(6,R,11,6,"ion-item",15),g.Jb(),g.Jb()),2&e){var n=g.Ub();g.xb(4),g.ac("ngForOf",n.labels),g.xb(2),g.ac("ngForOf",n.questionList)}}var K,q,x,k=[{path:"",component:(K=function(){function t(e,i,r,o,a,s){n(this,t),this.activatedRoute=e,this.questionService=i,this.router=r,this.alertController=o,this.loadingController=a,this.nlService=s,this.question=new b.a,this.user=new f.a,this.today=(new Date).toISOString()}var r,o,a;return r=t,(o=[{key:"ngOnInit",value:function(){this.characters=[" ",".","?"]}},{key:"ionViewWillEnter",value:function(){this.question=new b.a,this.questionId=this.activatedRoute.snapshot.params.id,this.user=d.a.getStorageUser(),this.getQuestion(this.questionId),this.show=!1,this.questionList=Array(),this.labels=new Array}},{key:"navigateAlert",value:function(e,t,n,i){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e,subHeader:t,buttons:[{text:n,handler:function(){a.router.navigate(["/"+i+"/"])}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"createQuestion",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Porfavor espere..."});case 2:return t=e.sent,e.next=5,t.present();case 5:this.question.user._id=this.user._id,this.question.date=new Date,this.question.open=!0,this.questionService.createQuestion(this.question).subscribe((function(e){e.status?n.router.navigate(["/tag-form/"+e.data._id],{queryParams:{labels:n.labels.map((function(e){return e.ref}))}}):n.navigateAlert("\xa1ERROR AL CREAR!","Hubo un problema al intentar crear esta pregunta","OK","my-questions"),t.dismiss()}),(function(e){n.navigateAlert("ERROR DE SERVIDOR",e.message,"OK","my-questions"),t.dismiss()}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"updateQuestion",value:function(){var e=this;this.questionService.updateQuestion(this.question).subscribe((function(t){t.status?e.navigateAlert("\xa1PREGUNTA ACTUALIZADA!","Actualizaste esta pregunta","OK","my-questions"):e.navigateAlert("\xa1ERROR AL ACTULIZAR!","Hubo un problema al intentar actualizar estra pregunta","OK","my-questions")}),(function(t){e.navigateAlert("ERROR DE SERVIDOR",t.message,"OK","events")}))}},{key:"getQuestion",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({message:"Porfavor espere..."});case 2:if(n=t.sent,"0"===e){t.next=9;break}return t.next=6,n.present();case 6:this.questionService.getQuestionById(e).subscribe((function(e){e.status?i.question=e.data:i.navigateAlert("\xa1ERROR AL OBTENER!","Hubo un problema al intentar obtener la informacion de esta pregunta","OK","my-questions"),n.dismiss()}),(function(e){i.navigateAlert("ERROR DE SERVIDOR",e.message,"OK","my-questions"),n.dismiss()})),t.next=10;break;case 9:this.question=new b.a;case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getClassifications",value:function(e){var t=this;(this.question.title?this.question.title.length:0)<10?(this.labels=[],this.show=!1,this.questionList=new Array):this.characters.find((function(t){return e===t}))&&this.nlService.getClassify(this.question).subscribe((function(e){e.data.length&&(t.labels=e.data,t.show=!0)}),(function(e){console.log(e)}))}},{key:"getQuestions",value:function(t){var n=this;this.nlService.getQuestions(t).subscribe((function(t){if(t.status){n.questionList=new Array;var i,r=e(t.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;n.questionList.push(o.question)}}catch(a){r.e(a)}finally{r.f()}}}),(function(e){console.log(e)}))}},{key:"viewQuestion",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"\xbfSalir de la edici\xf3n?",message:"Si continuas se perdera el progreso de tu pregunta.",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Continuar",cssClass:"success",handler:function(){i.router.navigate(["/question-view/"+e])}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}}])&&i(r.prototype,o),a&&i(r,a),t}(),K.\u0275fac=function(e){return new(e||K)(g.Hb(c.a),g.Hb(m.a),g.Hb(c.f),g.Hb(u.b),g.Hb(u.U),g.Hb(h.a))},K.\u0275cmp=g.Bb({type:K,selectors:[["app-question-form"]],decls:29,vars:6,consts:[["slot","start"],["menu","main-menu"],["slot","end"],["defaultHref","events"],["formQuestion","ngForm"],["displayFormat","MMMM DD, YYYY","display-timezone","utc","readonly","",3,"value"],["position","floating","color","medium"],["type","text","name","title","minlength","10","required","",3,"ngModel","ngModelChange","keyup"],["name","body","minlength","8","required","",3,"ngModel","ngModelChange","ionFocus"],["expand","full","color","myPrimary",3,"disabled","click",4,"ngIf","ngIfElse"],["elseBtn",""],[4,"ngIf"],["expand","full","color","myPrimary",3,"disabled","click"],[1,"ion-margin-start"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["expand","full","color","myPrimary",3,"click"],["color","medium","slot","end"],[3,"click"],["slot","end","color","myPrimaryDark"],["color","myPrimaryTextColor"]],template:function(e,t){if(1&e&&(g.Kb(0,"ion-header"),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-title"),g.ic(3,"Nueva pregunta "),g.Jb(),g.Kb(4,"ion-buttons",0),g.Ib(5,"ion-menu-button",1),g.Jb(),g.Kb(6,"ion-buttons",2),g.Ib(7,"ion-back-button",3),g.Jb(),g.Jb(),g.Jb(),g.Kb(8,"ion-content"),g.Kb(9,"form",null,4),g.Kb(11,"ion-list"),g.Kb(12,"ion-item"),g.Kb(13,"ion-label"),g.ic(14,"Fecha:"),g.Jb(),g.Ib(15,"ion-datetime",5),g.Jb(),g.Kb(16,"ion-item"),g.Kb(17,"ion-label",6),g.ic(18,"Tu pregunta:"),g.Jb(),g.Kb(19,"ion-input",7),g.Sb("ngModelChange",(function(e){return t.question.title=e}))("keyup",(function(e){return t.getClassifications(e.key)})),g.Jb(),g.Jb(),g.Kb(20,"ion-item"),g.Kb(21,"ion-label",6),g.ic(22,"Agrega mas detalles sobre la pregunta:"),g.Jb(),g.Kb(23,"ion-textarea",8),g.Sb("ngModelChange",(function(e){return t.question.body=e}))("ionFocus",(function(){return t.getClassifications("?")})),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Kb(24,"section"),g.gc(25,v,2,1,"ion-button",9),g.gc(26,p,2,1,"ng-template",null,10,g.hc),g.Jb(),g.gc(28,w,7,2,"div",11),g.Jb()),2&e){var n=g.cc(27);g.xb(15),g.ac("value",t.today),g.xb(4),g.ac("ngModel",t.question.title),g.xb(4),g.ac("ngModel",t.question.body),g.xb(2),g.ac("ngIf","0"==t.questionId)("ngIfElse",n),g.xb(3),g.ac("ngIf",t.show)}},directives:[u.w,u.R,u.Q,u.i,u.D,u.f,u.g,u.q,s.k,s.f,s.g,u.B,u.z,u.A,u.r,u.X,u.y,u.Y,s.b,s.j,s.e,s.h,u.O,a.j,u.h,u.N,a.i],pipes:[a.d],styles:["ion-content[_ngcontent-%COMP%]{--background:#fff}ion-title[_ngcontent-%COMP%]{--color:#fff;font-family:Arial,Helvetica,sans-serif}ion-toolbar[_ngcontent-%COMP%]{--background:#00796b;--color:#fff}ion-button[_ngcontent-%COMP%]{--color:#fff;font-family:Arial,Helvetica,sans-serif}"]}),K)}],A=((x=function e(){n(this,e)}).\u0275mod=g.Fb({type:x}),x.\u0275inj=g.Eb({factory:function(e){return new(e||x)},imports:[[c.i.forChild(k)],c.i]}),x),J=((q=function e(){n(this,e)}).\u0275mod=g.Fb({type:q}),q.\u0275inj=g.Eb({factory:function(e){return new(e||q)},imports:[[a.b,s.a,u.S,A]]}),q)}}])}();